{"version":3,"sources":["core/IOStream.ts","core/Interpreter.ts","tests/Fixtures.tsx","core/ImmutableList.ts","core/Runner.ts","core/utils.ts","hooks/useStream.ts","hooks/useBrainfuck.ts","components/Console.tsx","components/ControlPanel.tsx","components/Editor.tsx","components/GithubLink.tsx","components/UserManual.tsx","components/Memory.tsx","components/Visualization.tsx","components/App.tsx","index.tsx"],"names":["copyStream","stream","buffer","slice","readBuffer","initializeIOStream","size","pointer","readPointer","pendingSize","ioReducer","action","type","newStream","length","read","data","concat","Math","max","write","index","seek","instructionSet","Set","copyState","state","breakpoints","readMemory","memory","query","dataPointer","writeMemory","update","fetchInstruction","program","programCounter","isEnded","isStarted","blocked","isPaused","blockType","parse","output","startsWith","count","loopForward","ImmutableMap","loopBackward","split","filter","s","has","i","leftBrackets","Map","push","loopBeginning","pop","undefined","set","console","error","next","continuing","newState","binarySearch","instruction","overridePc","stdin","Error","stdout","target","get","brainfuckReducer","writeToStdin","unblockBreakpoint","breakpoint","log","ioStreams","input","refreshIO","testHelloWorld","buildTree","start","end","mid","floor","left","right","key","value","queryTree","node","updateTree","newNode","Object","assign","sliceTree","result","List","root","fromArray","this","array","createList","MAX_PROGRAM_CYCLES","setupProgram","parsed","Array","fill","run","cycles","finalState","numCycles","ended","ASCIIsToString","n","String","fromCharCode","stringToASCIIs","from","map","c","charCodeAt","useStream","useState","setStream","dispatch","useCallback","DEFAULT_STREAM_SIZE","setup","Console","programState","inputText","setInputText","ioBuffers","useMemo","inputBuffer","className","placeholder","onKeyUp","e","onChange","ControlPanel","setCode","onClick","disabled","Editor","code","enabled","language","val","padding","style","border","borderRadius","GithubLink","dangerouslySetInnerHTML","__html","UserManual","MemoryBlock","highlighted","toString","JSON","stringify","Memory","memoryLower","memoryUpper","memIndex","Visualization","memoryDisplayCount","min","currentBreakpointIndex","_","pc","getMemoryDisplayCount","width","App","initialProgram","setProgram","parsedProgram","inputStream","inputStreamDispatch","outputStream","outputStreamDispatch","setProgramState","useEffect","useBrainfuck","brainfuck","editorEnabled","window","innerWidth","setMemoryDisplayCount","handleResize","addEventListener","removeEventListener","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.9f6ce993.chunk.js","sourcesContent":["import { ReducerAction } from \"../types\";\n\nexport type IOAction =\n  | ReducerAction<\"read\" | \"seek\", number>\n  | ReducerAction<\"write\", number | number[]>;\nexport type IOStream = {\n  buffer: number[];\n  size: number;\n  pointer: number;\n  // The buffer for the last read\n  readPointer: number;\n  readBuffer: number[];\n  pendingSize: number;\n};\n\nexport type ReadOutput = [stream: IOStream, data: number];\n\nconst copyStream = (stream: IOStream) => ({\n  ...stream,\n  buffer: stream.buffer.slice(0),\n  readBuffer: stream.readBuffer.slice(0),\n});\n\n/**\n * When the stream is blocked (pendingSize > 0), no data will be read into the buffer\n */\nexport const read = (stream: IOStream, size: number): IOStream => {\n  let newStream = copyStream(stream);\n  if (newStream.pendingSize > 0 || newStream.buffer.length <= newStream.readPointer) {\n    newStream.pendingSize += size;\n    return newStream;\n  }\n\n  // Read `size` of bytes from the buffer\n  newStream.readBuffer = newStream.buffer.slice(\n    newStream.readPointer,\n    newStream.readPointer + size\n  );\n\n  newStream.readPointer = newStream.readPointer + newStream.readBuffer.length;\n  if (newStream.readBuffer.length < size) {\n    // We haven't read enough bytes, expect more inputs\n    newStream.pendingSize += size - newStream.readBuffer.length;\n  }\n\n  return newStream;\n};\n\nexport const write = (stream: IOStream, data: number | number[]): IOStream => {\n  if (typeof data == \"number\") data = [data];\n\n  let newStream = copyStream(stream);\n  newStream.buffer = newStream.buffer.slice(0, newStream.pointer).concat(data);\n  newStream.pointer += data.length;\n\n  if (newStream.pendingSize > 0) {\n    // Prevent pendingSize from underflowing\n    newStream.pendingSize = Math.max(newStream.pendingSize - data.length, 0);\n  }\n\n  return newStream;\n};\n\nconst seek = (stream: IOStream, index: number): IOStream => {\n  let newStream = copyStream(stream);\n  newStream.pointer = index;\n  newStream.readPointer = index;\n  return newStream;\n};\n\nexport const initializeIOStream = (size: number): IOStream => ({\n  buffer: [],\n  size: size,\n  pointer: 0,\n  readPointer: 0,\n  readBuffer: [],\n  pendingSize: 0,\n});\n\nexport const ioReducer = (stream: IOStream, action: IOAction): IOStream => {\n  switch (action.type) {\n    case \"read\":\n      return read(stream, action.data);\n    case \"write\":\n      return write(stream, action.data);\n    case \"seek\":\n      return seek(stream, action.data);\n  }\n};\n","import binarySearch from \"binarysearch\";\n// External library for laziness (and performance)\nimport { Map as ImmutableMap } from \"immutable\";\n\nimport { ReducerAction } from \"../types\";\nimport { ioReducer, IOStream } from \"./IOStream\";\n// Homemade Immutable List just for fun\nimport { List } from \"./ImmutableList\";\n\nexport type IOStreams = {\n  input: IOStream;\n  output: IOStream;\n};\nexport type BrainfuckCoreAction =\n  | ReducerAction<\"next\" | \"continue\">\n  | ReducerAction<\"breakpoint\", number>\n  | ReducerAction<\"write\", number[]>\n  | ReducerAction<\"refresh-io\", IOStreams>;\nconst instructionSet = new Set([\"<\", \">\", \",\", \".\", \"[\", \"]\", \"+\", \"-\"]);\nexport type Instruction = \"<\" | \">\" | \",\" | \".\" | \"[\" | \"]\" | \"+\" | \"-\";\nexport type BlockType = \"none\" | \"io\" | \"breakpoint\";\nexport type ParseResult = {\n  program: Instruction[];\n  loopForward: ImmutableMap<number, number>;\n  loopBackward: ImmutableMap<number, number>;\n};\n\nexport type ProgramState = {\n  programCounter: number;\n  dataPointer: number;\n  memory: List<number>;\n  program: Instruction[];\n\n  breakpoints: number[];\n  loopForward: ImmutableMap<number, number>;\n  loopBackward: ImmutableMap<number, number>;\n  blocked: boolean;\n  blockType: BlockType;\n\n  stdin: IOStream;\n  stdout: IOStream;\n};\n\nconst copyState = (state: ProgramState): ProgramState => ({\n  ...state,\n  // TODO: Implement immutable dynamic list\n  breakpoints: state.breakpoints.slice(0),\n});\n\nconst readMemory = (state: ProgramState) => state.memory.query(state.dataPointer);\nconst writeMemory = (state: ProgramState, data: number) =>\n  (state.memory = state.memory.update(state.dataPointer, data));\nconst fetchInstruction = (state: ProgramState): Instruction => state.program[state.programCounter];\n\nexport const isEnded = (state: ProgramState) => state.programCounter === state.program.length;\nexport const isStarted = (state: ProgramState) => state.programCounter > 0 || state.blocked;\nexport const isPaused = (state: ProgramState) => state.blockType === \"breakpoint\" && state.blocked;\n\n/**\n * Parse out the initial loop and ignore non-instruction characters\n */\nexport const parse = (program: string): ParseResult => {\n  let output: Instruction[] = [];\n  if (program.startsWith(\"[\")) {\n    let count = 1,\n      index = 1;\n    while (count > 0) {\n      if (program[index] === \"[\") {\n        count++;\n      }\n      if (program[index] === \"]\") {\n        count--;\n      }\n      if (index > 30000) {\n        return {\n          program: [],\n          loopForward: ImmutableMap(),\n          loopBackward: ImmutableMap(),\n        };\n      }\n      index++;\n    }\n    program = program.slice(index + 1);\n  }\n\n  output = program.split(\"\").filter((s) => instructionSet.has(s)) as any;\n\n  let i = 0;\n  let leftBrackets: number[] = [];\n  let loopForward = new Map<number, number>(),\n    loopBackward = new Map<number, number>();\n\n  for (; i < output.length; i++) {\n    if (output[i] === \"[\") {\n      leftBrackets.push(i);\n    } else if (output[i] === \"]\") {\n      let loopBeginning = leftBrackets.pop();\n      if (loopBeginning === undefined) break;\n\n      loopForward.set(loopBeginning, i);\n      loopBackward.set(i, loopBeginning);\n    }\n  }\n\n  if (leftBrackets.length > 0 || i < output.length) console.error(\"Unbalanced loops\");\n\n  return {\n    program: output,\n    loopForward: ImmutableMap(loopForward),\n    loopBackward: ImmutableMap(loopBackward),\n  };\n};\n\nconst next = (state: ProgramState, continuing: boolean = false): ProgramState => {\n  if (isEnded(state) || state.blocked) return state;\n\n  let newState = copyState(state);\n\n  if (binarySearch(newState.breakpoints, newState.programCounter) >= 0 && !continuing) {\n    // Breakpoint is triggered, it has a higher priority than the io block\n    newState.blocked = true;\n    newState.blockType = \"breakpoint\";\n    return newState;\n  }\n\n  const instruction = fetchInstruction(newState);\n  let overridePc = false;\n\n  switch (instruction) {\n    case \">\":\n      newState.dataPointer++;\n      break;\n    case \"<\":\n      newState.dataPointer--;\n      break;\n    case \"+\":\n      writeMemory(newState, readMemory(newState) + (1 % 256));\n      break;\n    case \"-\":\n      writeMemory(newState, (readMemory(newState) - 1 + 256) % 256);\n      break;\n    case \",\":\n      newState.stdin = ioReducer(newState.stdin, { type: \"read\", data: 1 });\n      if (newState.stdin.pendingSize > 0) {\n        // The stream is blocked, do not proceed\n        // The only way to resolve a blocked stream is to dispatch `write`\n        newState.blocked = true;\n        newState.blockType = \"io\";\n        return newState;\n      }\n      writeMemory(newState, newState.stdin.readBuffer[0]);\n      if (newState.stdin.readBuffer[0] === undefined)\n        throw new Error(`invalid write ${newState.stdin}`);\n      break;\n    case \".\":\n      newState.stdout = ioReducer(newState.stdout, { type: \"write\", data: readMemory(newState) });\n      break;\n    case \"[\":\n      if (readMemory(newState) === 0) {\n        // Skip the entire loop body until we reaches the corresponding ]\n        const target = newState.loopForward.get(newState.programCounter);\n        if (target === undefined) throw new Error(\"Cannot find the corresponding ]\");\n        newState.programCounter = target + 1;\n        overridePc = true;\n      }\n      break;\n    case \"]\":\n      if (readMemory(newState) !== 0) {\n        // Skip the entire loop body until we reaches the corresponding ]\n        const target = newState.loopBackward.get(newState.programCounter);\n        if (target === undefined) throw new Error(\"Cannot find the corresponding ]\");\n        newState.programCounter = target + 1;\n        overridePc = true;\n      }\n      break;\n  }\n\n  if (!overridePc) newState.programCounter++;\n\n  return newState;\n};\n\n/**\n * Write directly to the standard input stream\n */\nconst writeToStdin = (state: ProgramState, data: number[]) => {\n  let newState = copyState(state);\n  newState.stdin = ioReducer(newState.stdin, { type: \"write\", data: data });\n  if (newState.stdin.pendingSize === 0 && newState.blockType === \"io\") {\n    newState.blocked = false;\n    newState.blockType = \"none\";\n  }\n\n  return newState;\n};\n\nconst unblockBreakpoint = (state: ProgramState) => {\n  let newState = copyState(state);\n  if (newState.blocked && newState.blockType === \"breakpoint\") {\n    newState.blocked = false;\n    newState.blockType = \"none\";\n  }\n\n  return newState;\n};\n\nconst breakpoint = (state: ProgramState, breakpoint: number) => {\n  let newState = copyState(state);\n  for (let i = 0; i <= newState.breakpoints.length; i++) {\n    if (newState.breakpoints[i] === breakpoint) {\n      newState.breakpoints = newState.breakpoints\n        .slice(0, i)\n        .concat(newState.breakpoints.slice(i + 1, newState.breakpoints.length));\n      return newState;\n    }\n\n    if (i === newState.breakpoints.length || newState.breakpoints[i] > breakpoint) {\n      newState.breakpoints = newState.breakpoints\n        .slice(0, i)\n        .concat([breakpoint], newState.breakpoints.slice(i, newState.breakpoints.length));\n      return newState;\n    }\n  }\n\n  return newState;\n};\n\nconst refreshIO = (state: ProgramState, ioStreams: IOStreams) => {\n  let newState = copyState(state);\n  state.stdin = ioStreams.input;\n  state.stdout = ioStreams.output;\n  return newState;\n};\n\nexport const brainfuckReducer = (\n  state: ProgramState,\n  action: BrainfuckCoreAction\n): ProgramState => {\n  switch (action.type) {\n    case \"next\":\n      return next(state);\n    case \"write\":\n      return writeToStdin(state, action.data);\n    case \"continue\":\n      return next(unblockBreakpoint(state), true);\n    case \"breakpoint\":\n      return breakpoint(state, action.data);\n    case \"refresh-io\":\n      console.log(\"refresh io\");\n      console.log(action.data);\n      return refreshIO(state, action.data);\n  }\n};\n","import { IOStream } from \"../core/IOStream\";\nimport { Instruction } from \"../core/Interpreter\";\n\nexport const MockStream = (content: string = \"\"): IOStream => ({\n  buffer: Array.from(content).map((c) => c.charCodeAt(0)),\n  size: Infinity,\n  pointer: 0,\n  readPointer: 0,\n  readBuffer: [],\n  pendingSize: 0,\n});\n\nexport type Fixture = {\n  raw: string;\n  parsed: Instruction[];\n};\n\nexport const testHelloWorld: Fixture = {\n  raw: `[ This program prints \"Hello World!\" and a newline to the screen, its\nlength is 106 active command characters. [It is not the shortest.]\n\nThis loop is an \"initial comment loop\", a simple way of adding a comment\nto a BF program such that you don't have to worry about any command\ncharacters. Any \".\", \",\", \"+\", \"-\", \"<\" and \">\" characters are simply\nignored, the \"[\" and \"]\" characters just have to be balanced. This\nloop and the commands it contains are ignored because the current cell\ndefaults to a value of 0; the 0 value causes this loop to be skipped.\n]\n++++++++               Set Cell #0 to 8\n[\n  >++++               Add 4 to Cell #1; this will always set Cell #1 to 4\n  [                   as the cell will be cleared by the loop\n      >++             Add 2 to Cell #2\n      >+++            Add 3 to Cell #3\n      >+++            Add 3 to Cell #4\n      >+              Add 1 to Cell #5\n      <<<<-           Decrement the loop counter in Cell #1\n  ]                   Loop until Cell #1 is zero; number of iterations is 4\n  >+                  Add 1 to Cell #2\n  >+                  Add 1 to Cell #3\n  >-                  Subtract 1 from Cell #4\n  >>+                 Add 1 to Cell #6\n  [<]                 Move back to the first zero cell you find; this will\n                      be Cell #1 which was cleared by the previous loop\n  <-                  Decrement the loop Counter in Cell #0\n]                       Loop until Cell #0 is zero; number of iterations is 8\n\nThe result of this is:\nCell no :   0   1   2   3   4   5   6\nContents:   0   0  72 104  88  32   8\nPointer :   ^\n\n>>.                     Cell #2 has value 72 which is 'H'\n>---.                   Subtract 3 from Cell #3 to get 101 which is 'e'\n+++++++..+++.           Likewise for 'llo' from Cell #3\n>>.                     Cell #5 is 32 for the space\n<-.                     Subtract 1 from Cell #4 for 87 to give a 'W'\n<.                      Cell #3 was set to 'o' from the end of 'Hello'\n+++.------.--------.    Cell #3 for 'rl' and 'd'\n>>+.                    Add 1 to Cell #5 gives us an exclamation point\n>++.                    And finally a newline from Cell #6`,\n  parsed: [\n    \"+\",\n    \"+\",\n    \"+\",\n    \"+\",\n    \"+\",\n    \"+\",\n    \"+\",\n    \"+\",\n    \"[\",\n    \">\",\n    \"+\",\n    \"+\",\n    \"+\",\n    \"+\",\n    \"[\",\n    \">\",\n    \"+\",\n    \"+\",\n    \">\",\n    \"+\",\n    \"+\",\n    \"+\",\n    \">\",\n    \"+\",\n    \"+\",\n    \"+\",\n    \">\",\n    \"+\",\n    \"<\",\n    \"<\",\n    \"<\",\n    \"<\",\n    \"-\",\n    \"]\",\n    \">\",\n    \"+\",\n    \">\",\n    \"+\",\n    \">\",\n    \"-\",\n    \">\",\n    \">\",\n    \"+\",\n    \"[\",\n    \"<\",\n    \"]\",\n    \"<\",\n    \"-\",\n    \"]\",\n    \">\",\n    \">\",\n    \".\",\n    \">\",\n    \"-\",\n    \"-\",\n    \"-\",\n    \".\",\n    \"+\",\n    \"+\",\n    \"+\",\n    \"+\",\n    \"+\",\n    \"+\",\n    \"+\",\n    \".\",\n    \".\",\n    \"+\",\n    \"+\",\n    \"+\",\n    \".\",\n    \">\",\n    \">\",\n    \".\",\n    \"<\",\n    \"-\",\n    \".\",\n    \"<\",\n    \".\",\n    \"+\",\n    \"+\",\n    \"+\",\n    \".\",\n    \"-\",\n    \"-\",\n    \"-\",\n    \"-\",\n    \"-\",\n    \"-\",\n    \".\",\n    \"-\",\n    \"-\",\n    \"-\",\n    \"-\",\n    \"-\",\n    \"-\",\n    \"-\",\n    \"-\",\n    \".\",\n    \">\",\n    \">\",\n    \"+\",\n    \".\",\n    \">\",\n    \"+\",\n    \"+\",\n    \".\",\n  ],\n};\n\nexport const nestedLoop: Fixture = {\n  raw: \">++++[>,.<->>+++[>+<-]<<]\",\n  parsed: [\n    \">\",\n    \"+\",\n    \"+\",\n    \"+\",\n    \"+\",\n    \"[\",\n    \">\",\n    \",\",\n    \".\",\n    \"<\",\n    \"-\",\n    \">\",\n    \">\",\n    \"+\",\n    \"+\",\n    \"+\",\n    \"[\",\n    \">\",\n    \"+\",\n    \"<\",\n    \"-\",\n    \"]\",\n    \"<\",\n    \"<\",\n    \"]\",\n  ],\n};\n","type TreeNode<V> = {\n  size: number;\n  key: number;\n  value: V;\n  left?: TreeNode<V>;\n  right?: TreeNode<V>;\n};\n\nconst buildTree = <V>(data: V[], start: number, end: number): TreeNode<V> => {\n  if (start > end) throw new Error(\"Cannot parse an empty array\");\n\n  const mid = start + Math.floor((end - start) / 2);\n  const left = start < mid ? buildTree(data, start, mid - 1) : undefined;\n  const right = end > mid ? buildTree(data, mid + 1, end) : undefined;\n  return {\n    size: (left?.size ?? 0) + (right?.size ?? 0) + 1,\n    key: mid,\n    value: data[mid],\n    left: left,\n    right: right,\n  };\n};\n\nconst queryTree = <V>(key: number, node?: TreeNode<V>): V => {\n  if (!!!node) throw new Error(\"List index out of bounds\");\n  if (node.key === key) return node.value;\n\n  return node.key > key ? queryTree(key, node.left) : queryTree(key, node.right);\n};\n\nconst updateTree = <V>(key: number, value: V, node?: TreeNode<V>): TreeNode<V> => {\n  if (!!!node) throw new Error(\"List index out of bounds\");\n  let newNode = Object.assign({}, node);\n\n  if (newNode.key === key) {\n    newNode.value = value;\n    return newNode;\n  }\n\n  if (newNode.key > key) {\n    newNode.left = updateTree(key, value, newNode.left);\n  } else {\n    newNode.right = updateTree(key, value, newNode.right);\n  }\n\n  return newNode;\n};\n\nconst sliceTree = <V>(result: V[], start: number, end: number, node?: TreeNode<V>) => {\n  if (!!!node) throw new Error(\"List index out of range\");\n\n  if (node.left) sliceTree(result, start, end, node.left);\n  if (node.key >= start && node.key < end) result.push(node.value);\n  if (node.right) sliceTree(result, start, end, node.right);\n};\n\nconst createList = <V>(data: V[]): List<V> => new List({ fromArray: true, array: data });\n\nexport class List<V> {\n  root: TreeNode<V>;\n  constructor(data: { fromArray: true; array: V[] } | { fromArray: false; root: TreeNode<V> }) {\n    if (data.fromArray) {\n      this.root = buildTree(data.array, 0, data.array.length - 1);\n    } else {\n      this.root = data.root;\n    }\n  }\n\n  query(key: number): V {\n    return queryTree(key, this.root);\n  }\n\n  /**\n   * Perform an efficient immutable update to the list\n   */\n  update(key: number, value: V): List<V> {\n    const newRoot = updateTree(key, value, this.root);\n    return new List({ fromArray: false, root: newRoot });\n  }\n\n  slice(start: number, end: number): V[] {\n    let result: V[] = [];\n    sliceTree(result, start, end, this.root);\n    return result;\n  }\n\n  size(): number {\n    return this.root.size;\n  }\n}\n\nexport default createList;\n","import { MockStream } from \"../tests/Fixtures\";\nimport { IOStream } from \"./IOStream\";\nimport createList from \"./ImmutableList\";\nimport { ProgramState, brainfuckReducer, isEnded, ParseResult, parse } from \"./Interpreter\";\n\nexport type RunResult = {\n  finalState: ProgramState;\n  numCycles: number;\n  ended: boolean;\n};\n\nconst MEMORY_SIZE = 30000;\nexport const MAX_PROGRAM_CYCLES = 2 << 16;\n\nexport const setupProgram = (\n  parsed: ParseResult,\n  stdin: IOStream,\n  stdout: IOStream\n): ProgramState => ({\n  programCounter: 0,\n  dataPointer: 0,\n  memory: createList(Array(MEMORY_SIZE).fill(0)),\n  program: parsed.program,\n\n  breakpoints: [],\n  blocked: false,\n  blockType: \"none\",\n  loopForward: parsed.loopForward,\n  loopBackward: parsed.loopBackward,\n\n  stdin: stdin,\n  stdout: stdout,\n});\n\nexport const setupTestProgram = (program: string, input: string = \"\") =>\n  setupProgram(parse(program), MockStream(input), MockStream());\n\nexport const runCycles = (state: ProgramState, cycles: number): RunResult => {\n  let cyclesCount = 0;\n  while (!isEnded(state) && cyclesCount++ < cycles) {\n    state = brainfuckReducer(state, { type: \"next\" });\n  }\n  return {\n    finalState: state,\n    numCycles: cyclesCount,\n    ended: isEnded(state),\n  };\n};\n\nexport const run = (state: ProgramState): RunResult => {\n  let cycles = 0;\n  while (!isEnded(state) && ++cycles < MAX_PROGRAM_CYCLES) {\n    state = brainfuckReducer(state, { type: \"next\" });\n    if (state.blocked) break;\n  }\n\n  if (cycles === MAX_PROGRAM_CYCLES && !isEnded(state)) {\n    console.error(\"Time limit exceed\");\n  }\n\n  return {\n    finalState: state,\n    numCycles: cycles,\n    ended: isEnded(state),\n  };\n};\n","export const ASCIIsToString = (n: number[]): string => String.fromCharCode(...n);\nexport const stringToASCIIs = (s: string): number[] => Array.from(s).map((c) => c.charCodeAt(0));\n","import { useCallback, useState } from \"react\";\n\nimport { initializeIOStream, IOAction, ioReducer, IOStream } from \"../core/IOStream\";\nimport { ReducerAction, ReducerHookReturnType } from \"../types\";\n\nexport type StreamAction = IOAction | ReducerAction<\"reset\">;\n\nexport const useStream = (size: number): ReducerHookReturnType<IOStream, StreamAction> => {\n  const [stream, setStream] = useState<IOStream>(initializeIOStream(size));\n\n  const dispatch = useCallback(\n    (action: StreamAction) => {\n      if (action.type === \"reset\") {\n        console.log(\"dispatched and resetting\");\n        setStream(initializeIOStream(size));\n        return;\n      }\n\n      setStream((stream) => ioReducer(stream, action));\n    },\n    [setStream, size]\n  );\n\n  return [stream, dispatch];\n};\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\n\nimport { IOStream } from \"../core/IOStream\";\nimport { brainfuckReducer, parse, ParseResult, ProgramState } from \"../core/Interpreter\";\nimport { run, setupProgram } from \"../core/Runner\";\nimport { stringToASCIIs } from \"../core/utils\";\nimport { ReducerAction, ReducerHookReturnType } from \"../types\";\nimport { useStream } from \"./useStream\";\n\nexport type BrainfuckAction =\n  | ReducerAction<\"load\", string>\n  | ReducerAction<\"next\" | \"reset\" | \"reset-io\" | \"run\" | \"continue\">\n  | ReducerAction<\"write\", string>\n  | ReducerAction<\"breakpoint\", number>;\nconst DEFAULT_STREAM_SIZE = 2 << 10;\nconst setup = (parsed: ParseResult, input: IOStream, output: IOStream) =>\n  setupProgram(parsed, input, output);\n\nexport const useBrainfuck = (\n  initialProgram: string = \"\"\n): ReducerHookReturnType<ProgramState, BrainfuckAction> => {\n  const [program, setProgram] = useState(initialProgram);\n  const parsedProgram = useMemo(() => {\n    return parse(program);\n  }, [program]);\n  const [inputStream, inputStreamDispatch] = useStream(DEFAULT_STREAM_SIZE);\n  const [outputStream, outputStreamDispatch] = useStream(DEFAULT_STREAM_SIZE);\n  const [programState, setProgramState] = useState<ProgramState>(\n    setup(parsedProgram, inputStream, outputStream)\n  );\n\n  useEffect(() => {\n    console.log(\"IO stream useeffect\");\n    setProgramState((programState) =>{\n      let state = brainfuckReducer(programState, {\n        type: \"refresh-io\",\n        data: { input: inputStream, output: outputStream },\n      })\n      console.log(state);\n      return state;\n    }\n    );\n  }, [inputStream, outputStream, setProgramState]);\n\n  const dispatch = useCallback(\n    (action: BrainfuckAction) => {\n      switch (action.type) {\n        case \"load\":\n          setProgram(action.data);\n          break;\n        case \"next\":\n          setProgramState((programState) => brainfuckReducer(programState, { type: \"next\" }));\n          break;\n        case \"run\":\n          setProgramState((programState) => run(programState).finalState);\n          break;\n        case \"reset\":\n          setProgramState((programState) =>\n            setup(parsedProgram, programState.stdin, programState.stdout)\n          );\n          break;\n        case \"reset-io\":\n          console.log(\"dispatch reset\");\n          inputStreamDispatch({ type: \"reset\" });\n          outputStreamDispatch({ type: \"reset\" });\n          break;\n        case \"write\":\n          setProgramState((programState) =>\n            brainfuckReducer(programState, { type: \"write\", data: stringToASCIIs(action.data) })\n          );\n          break;\n        case \"breakpoint\":\n          setProgramState((programState) =>\n            brainfuckReducer(programState, { type: \"breakpoint\", data: action.data })\n          );\n          break;\n        case \"continue\":\n          setProgramState((programState) => brainfuckReducer(programState, { type: \"continue\" }));\n          break;\n      }\n    },\n    [setProgram, setProgramState, parsedProgram, inputStreamDispatch, outputStreamDispatch]\n  );\n\n  return [programState, dispatch];\n};\n","import { useMemo, useState } from \"react\";\n\nimport { BrainfuckAction } from \"../hooks/useBrainfuck\";\n\nimport \"../css/Console.css\";\n\nimport { ProgramState } from \"../core/Interpreter\";\nimport { ASCIIsToString } from \"../core/utils\";\n\nexport type ConsoleProps = {\n  programState: ProgramState;\n  dispatch: (action: BrainfuckAction) => void;\n};\n\nconst Console = ({ programState, dispatch }: ConsoleProps) => {\n  const [inputText, setInputText] = useState(\"\");\n  const ioBuffers = useMemo(\n    () => ({\n      output: ASCIIsToString(programState.stdout.buffer),\n      input: ASCIIsToString(programState.stdin.buffer),\n      inputBuffer: `\"${ASCIIsToString(programState.stdin.readBuffer)}\"`,\n    }),\n    [programState]\n  );\n\n  return (\n    <div>\n      <h2>Output</h2>\n      <div className=\"console\">\n        <div className=\"console-text\">\n          <pre>{ioBuffers.output}</pre>\n        </div>\n      </div>\n      <h2>Input</h2>\n      <div>\n        Last read:{\" \"}\n        {ioBuffers.inputBuffer !== '\"\"' ? (\n          <>\n            <span>{ioBuffers.inputBuffer}</span>&nbsp; at {programState.stdin.readPointer}\n          </>\n        ) : (\n          \"(empty)\"\n        )}\n      </div>\n      <div className=\"console with-input\">\n        <div className=\"console-text\">\n          <pre>{ioBuffers.input}</pre>\n        </div>\n        <div className=\"console-input\">\n          <input\n            placeholder=\"This is the console\"\n            value={inputText}\n            onKeyUp={(e) => {\n              if (e.key === \"Enter\") {\n                dispatch({ type: \"write\", data: inputText });\n                setInputText(\"\");\n              }\n            }}\n            onChange={(e) => setInputText(e.target.value + \"\\n\")}\n          />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Console;\n","import { BrainfuckAction } from \"../hooks/useBrainfuck\";\n\nimport \"../css/ControlPanel.css\";\n\nimport { ProgramState, isEnded, isStarted, isPaused } from \"../core/Interpreter\";\nimport { testHelloWorld } from \"../tests/Fixtures\";\n\nexport type ControlPanelProps = {\n  programState: ProgramState;\n  setCode: (code: string) => void;\n  dispatch: (action: BrainfuckAction) => void;\n};\n\nconst ControlPanel = ({ programState, setCode, dispatch }: ControlPanelProps) => {\n  return (\n    <div>\n      <h2>\n        Control Panel{\" \"}\n        {programState.program.length === 0 && (\n          <span className=\"note\">(enter any bf program to get started)</span>\n        )}\n      </h2>\n      <p>\n        Status:{\" \"}\n        {!isStarted(programState)\n          ? \"not started\"\n          : isEnded(programState)\n          ? \"ended\"\n          : programState.blocked\n          ? `blocked${\n              programState.blockType === \"breakpoint\"\n                ? \" (breakpoint)\"\n                : programState.blockType === \"io\"\n                ? \" (input required)\"\n                : \"\"\n            }`\n          : \"running\"}\n      </p>\n      <ul className=\"panel\">\n        <li>\n          <button\n            className=\"btn\"\n            onClick={() => {\n              if (isPaused(programState)) dispatch({ type: \"continue\" });\n              dispatch({ type: \"run\" });\n            }}\n            disabled={\n              programState.program.length === 0 ||\n              isEnded(programState) ||\n              (programState.blocked && !isPaused(programState))\n            }\n          >\n            {isStarted(programState) ? \"Continue\" : \"Run\"}\n          </button>\n        </li>\n        <li>\n          <button\n            className=\"btn\"\n            onClick={() => {\n              if (isPaused(programState)) dispatch({ type: \"continue\" });\n              else dispatch({ type: \"next\" });\n            }}\n            disabled={isEnded(programState) || (programState.blocked && !isPaused(programState))}\n          >\n            {!isStarted(programState) ? \"Start\" : \"Step\"}\n          </button>\n        </li>\n        <li>\n          <button\n            className=\"btn\"\n            onClick={() => {\n              if (!isStarted(programState)) {\n                dispatch({ type: \"reset-io\" });\n              }\n              dispatch({ type: \"reset\" });\n            }}\n            disabled={programState.program.length === 0}\n          >\n            Reset{\" \"}\n            {!isStarted(programState) &&\n            (programState.stdin.pointer > 0 || programState.stdout.pointer > 0)\n              ? \"IO\"\n              : \"\"}\n          </button>\n        </li>\n        <li>\n          <button className=\"btn\" onClick={() => setCode(testHelloWorld.raw)}>\n            Hello World!\n          </button>\n        </li>\n      </ul>\n    </div>\n  );\n};\n\nexport default ControlPanel;\n","import CodeEditor from \"@uiw/react-textarea-code-editor\";\n\nexport type EditorProps = {\n  code: string;\n  setCode: (val: string) => void;\n  enabled: boolean;\n};\n\nconst Editor = ({ code, setCode, enabled }: EditorProps) => {\n  return (\n    <div>\n      <h2>Editor</h2>\n      <CodeEditor\n        value={code}\n        language=\"brainfuck\"\n        placeholder=\"brainfuck program here\"\n        onChange={(val) => setCode(val.target.value)}\n        padding={10}\n        style={{\n          border: \"1px solid black\",\n          borderRadius: \"var(--border-radius)\",\n        }}\n        disabled={!enabled}\n      />\n    </div>\n  );\n};\n\nexport default Editor;\n","/**\n * Credits: https://tholman.com/github-corners/\n */\nconst GithubLink = () => {\n  return (\n    <div\n      dangerouslySetInnerHTML={{\n        __html:\n          '<a href=\"https://github.com/PIG208/react-brainfucked\" class=\"github-corner\" aria-label=\"View source on GitHub\"><svg width=\"80\" height=\"80\" viewBox=\"0 0 250 250\" style=\"fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;\" aria-hidden=\"true\"><path d=\"M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z\"></path><path d=\"M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2\" fill=\"currentColor\" style=\"transform-origin: 130px 106px;\" class=\"octo-arm\"></path><path d=\"M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z\" fill=\"currentColor\" class=\"octo-body\"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>',\n      }}\n    ></div>\n  );\n};\n\nexport default GithubLink;\n","import \"../css/UserManual.css\";\n\nconst UserManual = () => {\n  return (\n    <div>\n      <h2>User Manual</h2>\n      <p>A BF program has 8 different instructions</p>\n      <table className=\"manual-table\">\n        <thead>\n          <tr>\n            <th>Instruction</th>\n            <th>Description</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            <td>&gt;</td>\n            <td>Move the data pointer to the right</td>\n          </tr>\n          <tr>\n            <td>&lt;</td>\n            <td>Move the data pointer to the left</td>\n          </tr>\n          <tr>\n            <td>+</td>\n            <td>Increment the current memory cell</td>\n          </tr>\n          <tr>\n            <td>-</td>\n            <td>Decrement the current memory cell</td>\n          </tr>\n          <tr>\n            <td>,</td>\n            <td>Take one input from the stdin</td>\n          </tr>\n          <tr>\n            <td>.</td>\n            <td>Print the current memory (decoded as ASCII)</td>\n          </tr>\n          <tr>\n            <td>[</td>\n            <td>\n              Do nothing when the current memory cell is 0, otherwise jump to corresponding{\" \"}\n              <code>]</code>\n            </td>\n          </tr>\n          <tr>\n            <td>]</td>\n            <td>\n              Do nothing when the current memory cell is 0, otherwise jump to corresponding{\" \"}\n              <code>[</code>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n      <p>\n        Enter your program in the <span className=\"bordered-text\">Editor</span>. If it is nonempty,\n        you should be able to click on <span className=\"bordered-text\">Run</span> to run it.\n      </p>\n      <p>\n        You can also step through the program one cycle by one cycle after pressing the{\" \"}\n        <span className=\"bordered-text\">Start</span> button.\n      </p>\n      <p>\n        The <span className=\"bordered-text\">Last read</span> section indicates what the program has\n        just read from the user input.\n      </p>\n      <p>\n        To add an breakpoint, just click on the instruction to pause at in the parsed program block.\n      </p>\n    </div>\n  );\n};\n\nexport default UserManual;\n","import \"../css/Memory.css\";\n\nimport { ProgramState } from \"../core/Interpreter\";\n\nexport type MemoryProps = {\n  programState: ProgramState;\n  memoryLower: number;\n  memoryUpper: number;\n};\n\ntype MemoryBlockProps = {\n  index: number;\n  value: number;\n  highlighted: boolean;\n};\n\nconst MemoryBlock = ({ index, value, highlighted }: MemoryBlockProps) => {\n  return (\n    <div className={`memory-block${highlighted ? \" memory-block-highlighted\" : \"\"}`}>\n      <div>{index}</div>\n      <div>\n        {value}|{value.toString(16)}|{JSON.stringify(String.fromCharCode(value)).slice(1, -1)}\n      </div>\n    </div>\n  );\n};\n\nconst Memory = ({ programState, memoryLower, memoryUpper }: MemoryProps) => {\n  return (\n    <div className=\"memory-field\">\n      {programState.memory.slice(memoryLower, memoryUpper).map((value, index) => {\n        const memIndex = index + memoryLower;\n        return (\n          <MemoryBlock\n            index={memIndex}\n            value={value}\n            highlighted={programState.dataPointer === memIndex}\n            key={memIndex}\n          ></MemoryBlock>\n        );\n      })}\n      <p className=\"memory-size\">\n        Showing {memoryUpper - memoryLower} of {programState.memory.size()} memory blocks.\n      </p>\n    </div>\n  );\n};\n\nexport default Memory;\n","import { useMemo } from \"react\";\n\nimport { BrainfuckAction } from \"../hooks/useBrainfuck\";\n\nimport \"../css/Visualization.css\";\n\nimport { isStarted, ProgramState } from \"../core/Interpreter\";\nimport Memory from \"./Memory\";\n\nexport type VisualizationProps = {\n  programState: ProgramState;\n  dispatch: (action: BrainfuckAction) => void;\n  memoryDisplayCount: number;\n};\n\nconst Visualization = ({ programState, dispatch, memoryDisplayCount }: VisualizationProps) => {\n  const memoryLower = Math.max(0, programState.dataPointer - Math.floor(memoryDisplayCount / 2));\n  const memoryUpper = Math.min(memoryLower + memoryDisplayCount, programState.memory.size());\n  const isCurrentPc = (pc: number) =>\n    (!programState.blocked &&\n      (pc === programState.programCounter - 1 ||\n        (pc === 0 && programState.programCounter === 0))) ||\n    (programState.blocked && pc === programState.programCounter);\n  const breakpoints = useMemo(() => {\n    let currentBreakpointIndex = 0;\n    return programState.program.map((_, index) => {\n      if (index === programState.breakpoints[currentBreakpointIndex]) {\n        currentBreakpointIndex++;\n        return true;\n      }\n      return false;\n    });\n  }, [programState.program, programState.breakpoints]);\n\n  return (\n    <div>\n      <h2>Visualization</h2>\n      <div className=\"visualization\">\n        <div className=\"program-field\">\n          {programState.program.map((instruction, index) => (\n            <span\n              key={index}\n              className={(isStarted(programState) && isCurrentPc(index)\n                ? \"highlighted\"\n                : \"\"\n              ).concat(breakpoints[index] ? \" breakpoint\" : \"\")}\n              onClick={() => dispatch({ type: \"breakpoint\", data: index })}\n            >\n              {instruction}\n            </span>\n          ))}\n          <p>parsed program</p>\n        </div>\n        <div>\n          <p>\n            program counter: {programState.programCounter}\n            {programState.blocked ? \" (waiting for input)\" : \"\"}\n          </p>\n          <p>data pointer: {programState.dataPointer}</p>\n          <p>current data: {programState.memory.query(programState.dataPointer)}</p>\n        </div>\n      </div>\n      <p>Memory Cells</p>\n      <Memory programState={programState} memoryLower={memoryLower} memoryUpper={memoryUpper} />\n    </div>\n  );\n};\n\nexport default Visualization;\n","import { useEffect, useState } from \"react\";\n\nimport { useBrainfuck } from \"../hooks/useBrainfuck\";\n\nimport \"../css/App.css\";\n\nimport Console from \"./Console\";\nimport ControlPanel from \"./ControlPanel\";\nimport Editor from \"./Editor\";\nimport GithubLink from \"./GithubLink\";\nimport UserManual from \"./UserManual\";\nimport Visualization from \"./Visualization\";\n\nconst [xlg, lg, md, sm, xs] = [2560, 1920, 1463, 1024, 768];\nconst getMemoryDisplayCount = (width: number) =>\n  width >= xlg\n    ? 64\n    : width >= lg\n    ? 42\n    : width >= md\n    ? 35\n    : width >= sm\n    ? 24\n    : width >= xs\n    ? 15\n    : 12;\n\nfunction App() {\n  const [code, setCode] = useState(\"\");\n  const [brainfuck, dispatch] = useBrainfuck(code);\n  const [editorEnabled] = useState(true);\n  const [memoryDisplayCount, setMemoryDisplayCount] = useState(\n    getMemoryDisplayCount(window.innerWidth)\n  );\n\n  useEffect(() => {\n    function handleResize() {\n      setMemoryDisplayCount(getMemoryDisplayCount(window.innerWidth));\n    }\n\n    window.addEventListener(\"resize\", handleResize);\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []);\n\n  useEffect(() => {\n    dispatch({ type: \"load\", data: code });\n    dispatch({ type: \"reset\" });\n  }, [code, dispatch]);\n\n  return (\n    <div className=\"App\">\n      <h1 className=\"centered\">react-brainfucked</h1>\n      <h2 className=\"centered\">A brainfuck interpreter & debugger</h2>\n      <main className=\"App-main\">\n        <div>\n          <Editor code={code} setCode={setCode} enabled={editorEnabled} />\n          <Visualization\n            programState={brainfuck}\n            dispatch={dispatch}\n            memoryDisplayCount={memoryDisplayCount}\n          />\n        </div>\n        <div>\n          <ControlPanel programState={brainfuck} setCode={setCode} dispatch={dispatch} />\n          <Console programState={brainfuck} dispatch={dispatch} />\n          <UserManual />\n        </div>\n      </main>\n      <GithubLink />\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./components/App\";\n\nimport \"./css/index.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}