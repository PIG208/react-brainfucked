(this["webpackJsonpreact-brainfucked"]=this["webpackJsonpreact-brainfucked"]||[]).push([[0],{382:function(e,t,r){},383:function(e,t,r){},384:function(e,t,r){},385:function(e,t,r){"use strict";r.r(t);var n=r(1),i=r.n(n),c=r(60),a=r.n(c),o=r(6),s=r(17),l=function(e){return Object(s.a)(Object(s.a)({},e),{},{buffer:e.buffer.slice(0),readBuffer:e.readBuffer.slice(0)})},d=function(e){return{buffer:[],size:e,pointer:0,readPointer:0,readBuffer:[],pendingSize:0}},u=function(e,t){switch(t.type){case"read":return function(e,t){var r=l(e);return r.pendingSize>0||r.buffer.length<=r.readPointer?(r.pendingSize+=t,r):(r.readBuffer=r.buffer.slice(r.readPointer,r.readPointer+t),r.readPointer=r.readPointer+r.readBuffer.length,r.readBuffer.length<t&&(r.pendingSize+=t-r.readBuffer.length),r)}(e,t.data);case"write":return function(e,t){"number"==typeof t&&(t=[t]);var r=l(e);return r.buffer=r.buffer.slice(0,r.pointer).concat(t),r.pointer+=t.length,r.pendingSize>0&&(r.pendingSize=Math.max(r.pendingSize-t.length,0)),r}(e,t.data);case"seek":return function(e,t){var r=l(e);return r.pointer=t,r.readPointer=t,r}(e,t.data)}},h=r(61),j=new Set(["<",">",",",".","[","]","+","-"]),b=function(e){return Object(s.a)({},e)},f=function(e){return e.memory.query(e.dataPointer)},p=function(e,t){return e.memory=e.memory.update(e.dataPointer,t)},m=function(e){return e.programCounter===e.program.length},O=function(e){return e.programCounter>0||e.blocked},x=function(e){var t=[];if(e.startsWith("[")){for(var r=1,n=1;r>0;){if("["===e[n]&&r++,"]"===e[n]&&r--,n>3e4)return[];n++}e=e.slice(n+1)}var i,c=Object(h.a)(e);try{for(c.s();!(i=c.n()).done;){var a=i.value;j.has(a)&&t.push(a)}}catch(o){c.e(o)}finally{c.f()}return t},g=function(e,t){switch(t.type){case"next":return function(e){if(m(e))return e;var t=b(e),r=function(e){return e.program[e.programCounter]}(t),n=!1;if(t.skipping&&"]"!==r)return t.programCounter++,t;switch(r){case">":t.dataPointer++;break;case"<":t.dataPointer--;break;case"+":p(t,f(t)+1);break;case"-":p(t,f(t)-1);break;case",":if(t.blocked)return t;if(t.stdin=u(t.stdin,{type:"read",data:1}),t.stdin.pendingSize>0)return t.blocked=!0,t;if(p(t,t.stdin.readBuffer[0]),void 0===t.stdin.readBuffer[0])throw new Error("invalid write ".concat(t.stdin));break;case".":t.stdout=u(t.stdout,{type:"write",data:f(t)});break;case"[":0!==f(t)?t.jmpStack.push(t.programCounter):t.skipping=!0;break;case"]":0===f(t)?t.jmpStack.pop():(t.programCounter=t.jmpStack[t.jmpStack.length-1]+1,n=!0)}return n||t.programCounter++,t}(e);case"write":return function(e,t){var r=b(e);return r.stdin=u(r.stdin,{type:"write",data:t}),0===r.stdin.pendingSize&&(r.blocked=!1),r}(e,t.data)}},y=r(3),v=r(14),k=function e(t,r,n){var i,c;if(r>n)throw new Error("Cannot parse an empty array");var a=r+Math.floor((n-r)/2),o=r<a?e(t,r,a-1):void 0,s=n>a?e(t,a+1,n):void 0;return{size:(null!==(i=null===o||void 0===o?void 0:o.size)&&void 0!==i?i:0)+(null!==(c=null===s||void 0===s?void 0:s.size)&&void 0!==c?c:0)+1,key:a,value:t[a],left:o,right:s}},C=function e(t,r){if(!r)throw new Error("List index out of bounds");return r.key===t?r.value:r.key>t?e(t,r.left):e(t,r.right)},w=function e(t,r,n){if(!n)throw new Error("List index out of bounds");var i=Object.assign({},n);return i.key===t?(i.value=r,i):(i.key>t?i.left=e(t,r,i.left):i.right=e(t,r,i.right),i)},S=function e(t,r,n,i){if(!i)throw new Error("List index out of range");i.left&&e(t,r,n,i.left),i.key>=r&&i.key<n&&t.push(i.value),i.right&&e(t,r,n,i.right)},A=function(){function e(t){Object(y.a)(this,e),this.root=void 0,t.fromArray?this.root=k(t.array,0,t.array.length-1):this.root=t.root}return Object(v.a)(e,[{key:"query",value:function(e){return C(e,this.root)}},{key:"update",value:function(t,r){return new e({fromArray:!1,root:w(t,r,this.root)})}},{key:"slice",value:function(e,t){var r=[];return S(r,e,t,this.root),r}},{key:"size",value:function(){return this.root.size}}]),e}(),z=function(e){return new A({fromArray:!0,array:e})},N=2<<16,P=function(e){for(var t=0;!m(e)&&++t<N;)e=g(e,{type:"next"});return t!==N||m(e)||console.error("Time limit exceed"),{finalState:e,numCycles:t,ended:m(e)}},B=r(7),E=function(e){return String.fromCharCode.apply(String,Object(B.a)(e))},M=function(e){return Array.from(e).map((function(e){return e.charCodeAt(0)}))},I=function(e){return t=e,r=d(2048),n=d(2048),{programCounter:0,dataPointer:0,memory:z(Array(3e4).fill(0)),jmpStack:[],program:t,skipping:!1,blocked:!1,stdin:r,stdout:n};var t,r,n},T=(r(73),r(74),r(0)),D=function(e){var t=e.programState,r=e.dispatch,i=Object(n.useState)(""),c=Object(o.a)(i,2),a=c[0],s=c[1],l=Object(n.useMemo)((function(){return{output:E(t.stdout.buffer),input:E(t.stdin.buffer)}}),[t]);return Object(T.jsxs)("div",{children:[Object(T.jsx)("h2",{children:"Output"}),Object(T.jsx)("div",{className:"console",children:Object(T.jsx)("div",{className:"console-text",children:Object(T.jsx)("pre",{children:l.output})})}),Object(T.jsx)("h2",{children:"Output"}),Object(T.jsxs)("div",{className:"console with-input",children:[Object(T.jsx)("div",{className:"console-text",children:Object(T.jsx)("pre",{children:l.input})}),Object(T.jsx)("div",{className:"console-input",children:Object(T.jsx)("input",{placeholder:"This is the console",value:a,onKeyUp:function(e){"Enter"===e.key&&(r({type:"write",data:a}),s(""))},onChange:function(e){return s(e.target.value+"\n")}})})]})]})},F=(r(76),'[ This program prints "Hello World!" and a newline to the screen, its\nlength is 106 active command characters. [It is not the shortest.]\n\nThis loop is an "initial comment loop", a simple way of adding a comment\nto a BF program such that you don\'t have to worry about any command\ncharacters. Any ".", ",", "+", "-", "<" and ">" characters are simply\nignored, the "[" and "]" characters just have to be balanced. This\nloop and the commands it contains are ignored because the current cell\ndefaults to a value of 0; the 0 value causes this loop to be skipped.\n]\n++++++++               Set Cell #0 to 8\n[\n  >++++               Add 4 to Cell #1; this will always set Cell #1 to 4\n  [                   as the cell will be cleared by the loop\n      >++             Add 2 to Cell #2\n      >+++            Add 3 to Cell #3\n      >+++            Add 3 to Cell #4\n      >+              Add 1 to Cell #5\n      <<<<-           Decrement the loop counter in Cell #1\n  ]                   Loop until Cell #1 is zero; number of iterations is 4\n  >+                  Add 1 to Cell #2\n  >+                  Add 1 to Cell #3\n  >-                  Subtract 1 from Cell #4\n  >>+                 Add 1 to Cell #6\n  [<]                 Move back to the first zero cell you find; this will\n                      be Cell #1 which was cleared by the previous loop\n  <-                  Decrement the loop Counter in Cell #0\n]                       Loop until Cell #0 is zero; number of iterations is 8\n\nThe result of this is:\nCell no :   0   1   2   3   4   5   6\nContents:   0   0  72 104  88  32   8\nPointer :   ^\n\n>>.                     Cell #2 has value 72 which is \'H\'\n>---.                   Subtract 3 from Cell #3 to get 101 which is \'e\'\n+++++++..+++.           Likewise for \'llo\' from Cell #3\n>>.                     Cell #5 is 32 for the space\n<-.                     Subtract 1 from Cell #4 for 87 to give a \'W\'\n<.                      Cell #3 was set to \'o\' from the end of \'Hello\'\n+++.------.--------.    Cell #3 for \'rl\' and \'d\'\n>>+.                    Add 1 to Cell #5 gives us an exclamation point\n>++.                    And finally a newline from Cell #6'),L=function(e){var t=e.programState,r=e.setCode,n=e.dispatch;return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsxs)("h2",{children:["Control Panel"," ",0===t.program.length&&Object(T.jsx)("span",{className:"note",children:"(enter any bf program to get started)"})]}),Object(T.jsxs)("ul",{className:"panel",children:[Object(T.jsx)("li",{children:Object(T.jsx)("button",{className:"btn",onClick:function(){return n({type:"run"})},disabled:0===t.program.length,children:"Run"})}),Object(T.jsx)("li",{children:Object(T.jsx)("button",{className:"btn",onClick:function(){return n({type:"next"})},disabled:m(t)||t.blocked,children:O(t)?"Step".concat(t.blocked?" (input required)":""):"Start"})}),Object(T.jsx)("li",{children:Object(T.jsx)("button",{className:"btn",onClick:function(){return n({type:"reset"})},disabled:0===t.program.length,children:"Reset"})}),Object(T.jsx)("li",{children:Object(T.jsx)("button",{className:"btn",onClick:function(){return r(F)},children:"Hello World!"})})]})]})},q=r(67),H=function(e){var t=e.code,r=e.setCode,n=e.enabled;return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("h2",{children:"Editor"}),Object(T.jsx)(q.a,{value:t,language:"brainfuck",placeholder:"brainfuck program here",onChange:function(e){return r(e.target.value)},padding:10,style:{border:"1px solid black",borderRadius:"var(--border-radius)"},disabled:!n})]})},R=(r(382),function(){return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("h2",{children:"User Manual"}),Object(T.jsx)("p",{children:"A BF program has 8 different instructions"}),Object(T.jsxs)("table",{className:"manual-table",children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Instruction"}),Object(T.jsx)("th",{children:"Description"})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:">"}),Object(T.jsx)("td",{children:"Move the data pointer to the right"})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:"<"}),Object(T.jsx)("td",{children:"Move the data pointer to the left"})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:"+"}),Object(T.jsx)("td",{children:"Increment the current memory cell"})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:"-"}),Object(T.jsx)("td",{children:"Decrement the current memory cell"})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:","}),Object(T.jsx)("td",{children:"Take one input from the stdin"})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:"."}),Object(T.jsx)("td",{children:"Print the current memory (decoded as ASCII)"})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:"["}),Object(T.jsxs)("td",{children:["Do nothing when the current memory cell is 0, otherwise jump to corresponding"," ",Object(T.jsx)("code",{children:"]"})]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:"]"}),Object(T.jsxs)("td",{children:["Do nothing when the current memory cell is 0, otherwise jump to corresponding"," ",Object(T.jsx)("code",{children:"["})]})]}),Object(T.jsxs)("p",{children:["Enter your program in the ",Object(T.jsx)("span",{className:"bordered-text",children:"Editor"}),". If it is nonempty, you should be able to click on ",Object(T.jsx)("span",{className:"bordered-text",children:"Run"})," to run it."]})]}),Object(T.jsxs)("p",{children:["You can also step through the program one cycle by one cycle after pressing the"," ",Object(T.jsx)("span",{className:"bordered-text",children:"Start"})," button."]})]})}),W=(r(383),function(e){var t=e.programState;return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("h2",{children:"Visualization"}),Object(T.jsxs)("div",{className:"visualization",children:[Object(T.jsxs)("div",{className:"program-field",children:[t.program.map((function(e,r){return Object(T.jsx)("span",{className:O(t)&&(n=r,!t.blocked&&(n===t.programCounter-1||0===n&&0===t.programCounter)||t.blocked&&n===t.programCounter)?"highlighted":"",children:e},r);var n})),Object(T.jsx)("p",{children:"parsed program"})]}),Object(T.jsxs)("div",{children:[Object(T.jsxs)("p",{children:["program counter: ",t.programCounter,t.blocked?" (waiting for input)":""]}),Object(T.jsxs)("p",{children:["data pointer: ",t.dataPointer]}),Object(T.jsxs)("p",{children:["current data: ",t.memory.query(t.dataPointer)]})]})]})]})});var J=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),r=t[0],i=t[1],c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=Object(n.useState)(e),r=Object(o.a)(t,2),i=r[0],c=r[1],a=Object(n.useMemo)((function(){return x(i)}),[i]),s=Object(n.useState)(I(a)),l=Object(o.a)(s,2),d=l[0],u=l[1],h=Object(n.useCallback)((function(e){switch(e.type){case"load":c(e.data);break;case"next":u((function(e){return g(e,{type:"next"})}));break;case"run":u((function(e){return P(e).finalState}));break;case"reset":u(I(a));break;case"write":u((function(t){return g(t,{type:"write",data:M(e.data)})}))}}),[c,u,a]);return[d,h]}(r),a=Object(o.a)(c,2),s=a[0],l=a[1],d=Object(n.useState)(!0),u=Object(o.a)(d,1)[0];return Object(n.useEffect)((function(){l({type:"load",data:r}),l({type:"reset"})}),[r,l]),Object(T.jsx)("div",{className:"App",children:Object(T.jsxs)("main",{className:"App-main",children:[Object(T.jsx)("div",{children:Object(T.jsx)("h1",{id:"center",children:"react-brainfucked"})}),Object(T.jsxs)("div",{children:[Object(T.jsx)(H,{code:r,setCode:i,enabled:u}),Object(T.jsx)(W,{programState:s}),Object(T.jsx)(L,{programState:s,setCode:i,dispatch:l}),Object(T.jsx)(D,{programState:s,dispatch:l}),Object(T.jsx)(R,{})]})]})})};r(384);a.a.render(Object(T.jsx)(i.a.StrictMode,{children:Object(T.jsx)(J,{})}),document.getElementById("root"))},73:function(e,t,r){},74:function(e,t,r){},76:function(e,t,r){}},[[385,1,2]]]);
//# sourceMappingURL=main.81df9b03.chunk.js.map